{"version":3,"file":"static/js/MovieDetailsPage.f29b2d24.chunk.js","mappings":"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","sources":["webpack://react-homework-template/./src/components/MovieCard/MovieCard.module.css?a4e5","components/MovieCard/MovieCard.js","webpack://react-homework-template/./src/components/GoToBack/GoToBack.module.css?913a","components/GoToBack/GoToBack.js","webpack://react-homework-template/./src/components/pages/MovieDetailsPage.module.css?7d9b","components/pages/MovieDetailsPage.js","components/services/movies-api.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"Wrapper\":\"MovieCard_Wrapper__Dhi3B\",\"Thumb\":\"MovieCard_Thumb__KQgpQ\",\"Img\":\"MovieCard_Img__--Omj\",\"Subtitle\":\"MovieCard_Subtitle__+TAOP\",\"Paragraf\":\"MovieCard_Paragraf__Kzf1r\"};","import PropTypes from 'prop-types';\nimport s from './MovieCard.module.css';\n// import { useLocation } from 'react-router-dom';\n\nexport const MovieCard = ({ movie }) => {\n  const {\n    title,\n    normalizedPoster,\n    overview,\n    normalizedGenres,\n    normalizedYear,\n    normalizedPopularity,\n  } = movie;\n\n  // const location = useLocation();\n  // console.log(location);\n\n  return (\n    <>\n      <div className={s.Wrapper}>\n        <img src={normalizedPoster} alt={title} width=\"250\" className={s.Img} />\n\n        <div className={s.Thumb}>\n          <h2>\n            {title}({normalizedYear})\n          </h2>\n          <p className={s.Paragraf}>User score: {normalizedPopularity}</p>\n          <h3 className={s.Subtitle}>Overview</h3>\n          <p className={s.Paragraf}>{overview}</p>\n          <h3 className={s.Subtitle}>Genres</h3>\n          <p className={s.Paragraf}>{normalizedGenres}</p>\n        </div>\n      </div>\n    </>\n  );\n};\n\nMovieCard.propTypes = {\n  movie: PropTypes.shape({\n    title: PropTypes.string,\n    poster_path: PropTypes.string,\n    overview: PropTypes.string,\n    normalizedGenres: PropTypes.string,\n    normalizedYear: PropTypes.number,\n    normalizedPopularity: PropTypes.number,\n  }).isRequired,\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"Back\":\"GoToBack_Back__bm943\"};","import PropTypes from 'prop-types';\n\nimport s from './GoToBack.module.css';\n\nexport const GoToBack = ({ onClick }) => (\n  <button type=\"button\" className={s.Back} onClick={onClick}>\n    &#10094; Go back\n  </button>\n);\n\nGoToBack.propTypes = {\n  onClick: PropTypes.func.isRequired,\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"Wrapper\":\"MovieDetailsPage_Wrapper__Yczgt\",\"Link\":\"MovieDetailsPage_Link__vgqnH\",\"Active\":\"MovieDetailsPage_Active__LBJ-a\"};","import { useState, useEffect, lazy, Suspense } from 'react';\nimport {\n  Route,\n  useRouteMatch,\n  NavLink,\n  useParams,\n  useHistory,\n  useLocation,\n} from 'react-router-dom';\nimport { fetchMovieById } from '../services/movies-api';\nimport { MovieCard } from '../MovieCard';\nimport emptyImg from '../../images/img_not_found.jpg';\n// import { Cast } from './Cast';\n// import { Reviews } from './Reviews';\nimport { Container } from '../Container';\nimport { GoToBack } from '../GoToBack';\nimport s from './MovieDetailsPage.module.css';\n\nconst Cast = lazy(() => import('./Cast.js' /* webpackChunkName: 'Cast' */));\nconst Reviews = lazy(() =>\n  import('./Reviews.js' /* webpackChunkName: 'Reviews' */)\n);\n\nconst MovieDetailsPage = () => {\n  const [movie, setMovie] = useState({});\n  const [error, setError] = useState(null);\n\n  const { movieId } = useParams();\n  const { url, path } = useRouteMatch();\n  console.log(url);\n  const history = useHistory();\n  const location = useLocation();\n  // console.log(history);\n  console.log(location);\n\n  useEffect(() => {\n    const fetchMovieInfo = async () => {\n      try {\n        let data = await fetchMovieById(movieId);\n        const {\n          id,\n          title,\n          poster_path,\n          overview,\n          release_date,\n          genres,\n          popularity,\n        } = data;\n        const normalizedYear = new Date(release_date).getFullYear();\n        const normalizedGenres = genres.map(genre => genre.name).join(', ');\n        const normalizedPopularity = Math.round(popularity);\n        let normalizedPoster = '';\n        normalizedPoster = poster_path\n          ? `https://image.tmdb.org/t/p/w500/${poster_path}`\n          : emptyImg;\n        setMovie({\n          id,\n          title,\n          normalizedPoster,\n          overview,\n          normalizedGenres,\n          normalizedYear,\n          normalizedPopularity,\n        });\n      } catch (error) {\n        setError(error);\n      }\n    };\n    fetchMovieInfo();\n  }, [movieId]);\n\n  const onClickGoBack = () => {\n    history.push(location?.state?.from ?? '/movies');\n  };\n\n  return (\n    <>\n      {error && <div>{error.message}</div>}\n      <Container>\n        <GoToBack onClick={onClickGoBack} />\n        {movie && <MovieCard movie={movie} />}\n        <div className={s.Wrapper}>\n          <NavLink\n            to={`${url}/cast`}\n            className={s.Link}\n            activeClassName={s.Active}\n          >\n            Cast\n          </NavLink>\n          <NavLink\n            to={`${url}/reviews`}\n            className={s.Link}\n            activeClassName={s.Active}\n          >\n            Reviews\n          </NavLink>\n        </div>\n        <Suspense fallback={<div>Loading...</div>}>\n          <Route path={`${path}/cast`}>\n            <Cast location={location} />\n          </Route>\n          <Route path={`${path}/reviews`}>\n            <Reviews location={location} />\n          </Route>\n        </Suspense>\n      </Container>\n    </>\n  );\n};\n\nexport default MovieDetailsPage;\n","const BASE_URL = 'https://api.themoviedb.org/3';\nconst API_KEY = '3b4cb0b5c3c509ec710c203c7a14be66';\n\nconst fetchWithErrorHandling = async (url = '', config = {}) => {\n  const response = await fetch(url, config);\n  return response.ok\n    ? await response.json()\n    : Promise.reject(new Error(`Something went wrong`));\n};\n\nexport const fetchTrending = () => {\n  return fetchWithErrorHandling(\n    `${BASE_URL}/trending/movie/day?api_key=${API_KEY}`\n  );\n};\n\nexport const fetchMovieById = id => {\n  return fetchWithErrorHandling(`${BASE_URL}/movie/${id}?api_key=${API_KEY}`);\n};\n\nexport const movieSearch = searchQuery => {\n  return fetchWithErrorHandling(\n    `${BASE_URL}/search/movie?api_key=${API_KEY}&query=${searchQuery}`\n  );\n};\n\nexport const fetchCast = id => {\n  return fetchWithErrorHandling(\n    `${BASE_URL}/movie/${id}/credits?api_key=${API_KEY}`\n  );\n};\n\nexport const fetchReviews = id => {\n  return fetchWithErrorHandling(\n    `${BASE_URL}/movie/${id}/reviews?api_key=${API_KEY}`\n  );\n};\n"],"names":["MovieCard","movie","title","normalizedPoster","overview","normalizedGenres","normalizedYear","normalizedPopularity","className","s","src","alt","width","GoToBack","onClick","type","Cast","lazy","Reviews","useState","setMovie","error","setError","movieId","useParams","useRouteMatch","url","path","console","log","history","useHistory","location","useLocation","useEffect","fetchMovieInfo","fetchMovieById","data","id","poster_path","release_date","genres","popularity","Date","getFullYear","map","genre","name","join","Math","round","emptyImg","message","Container","push","state","from","to","activeClassName","Suspense","fallback","BASE_URL","API_KEY","fetchWithErrorHandling","config","fetch","response","ok","json","Promise","reject","Error","fetchTrending","movieSearch","searchQuery","fetchCast","fetchReviews"],"sourceRoot":""}